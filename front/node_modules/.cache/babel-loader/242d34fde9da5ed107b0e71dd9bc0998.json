{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\erika\\\\Desktop\\\\proyectos\\\\Casa\\\\distribuidora\\\\front\\\\src\\\\Components\\\\Home\\\\Exportacion\\\\exportacion.js\";\nimport React from \"react\";\nimport api from '../../config/Api';\nimport \"react-tabulator/lib/css/bootstrap/tabulator_bootstrap.min.css\";\nimport { React15Tabulator } from \"react-tabulator\";\nimport axios from 'axios';\nimport moment from 'moment';\nimport ExcelDownload from './exportExcel';\nconst data = [];\n\nclass ListaPagos extends React.Component {\n  constructor(props) {\n    super(props);\n    this.consultaVentas = this.consultaVentas.bind(this);\n    this.exExcelTes = this.exExcelTes.bind(this);\n    this.state = {\n      data: '',\n      dataExcel: '',\n      inicio: null,\n      final: null,\n      titulos: '',\n      isExcel: null\n    };\n  }\n\n  change(e) {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  } //Cargamos los datos de la tabla.\n\n\n  componentDidMount() {} //Insertamos los datos.\n\n\n  consultaVentas() {\n    let inicio = this.state.inicio;\n    let final = this.state.final;\n    const data = 1;\n    this.setState({\n      data\n    }); //Realizamos la consulta con las fehcas\n\n    axios.post(`${api}/api/informes/ventas/${inicio}/${final}`).then(res => {\n      if (res.status === 200) {\n        let dataVentas = res.data.ventas;\n        let newArrayDatosGrilla = [];\n        let newArrayDatosExcel2 = [];\n        let arrayTitulos = ['Fecha Documento', 'N Factura', 'Nombre Cliente', 'Tipo Factura', 'Codigo', 'Rut', 'Total Neto', 'IVA', 'Total'];\n\n        for (let i = 0; i < dataVentas.length; i++) {\n          let newFecha = new Date(dataVentas[i]['fechaDocumento']);\n          newFecha = moment(newFecha).format('DD/MM/YYYY');\n          let newArrayDatosExcel = [];\n          newArrayDatosGrilla.push({\n            fechaDocumento: newFecha,\n            numeroFactura: dataVentas[i]['numeroFactura'],\n            nombreCliente: dataVentas[i]['nombreCliente'],\n            nombreTipoFactura: dataVentas[i]['nombreTipoFactura'],\n            codigo: dataVentas[i]['codigo'],\n            rut: dataVentas[i]['rut'],\n            totalNeto: dataVentas[i]['totalNeto'],\n            IVA: dataVentas[i]['IVA'],\n            total: dataVentas[i]['total']\n          });\n          newArrayDatosExcel.push(newFecha);\n          newArrayDatosExcel.push(dataVentas[i]['numeroFactura']);\n          newArrayDatosExcel.push(dataVentas[i]['nombreCliente']);\n          newArrayDatosExcel.push(dataVentas[i]['nombreTipoFactura']);\n          newArrayDatosExcel.push(dataVentas[i]['codigo']);\n          newArrayDatosExcel.push(dataVentas[i]['rut']);\n          newArrayDatosExcel.push(dataVentas[i]['totalNeto']);\n          newArrayDatosExcel.push(dataVentas[i]['IVA']);\n          newArrayDatosExcel.push(dataVentas[i]['total']);\n          newArrayDatosExcel2.push(newArrayDatosExcel);\n        } //console.log(newArrayDatos);\n\n\n        this.setState({\n          titulos: arrayTitulos\n        });\n        this.setState({\n          data: newArrayDatosGrilla\n        });\n        this.setState({\n          dataExcel: newArrayDatosExcel2\n        });\n        this.setState({\n          isExcel: true\n        });\n      } else {}\n    });\n  }\n\n  exExcelTes() {\n    let titulos = this.state.titulos;\n    let dataExcel = this.state.dataExcel;\n    const ex = /*#__PURE__*/React.createElement(ExcelDownload, {\n      titulos: titulos,\n      datos: dataExcel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    });\n    return ex;\n  }\n\n  render() {\n    let filteredData = this.state.data; //Agregamos las columnas a la tabla.\n\n    const columns = [{\n      title: \"Fecha Documento\",\n      field: \"fechaDocumento\",\n      width: \"9%\"\n    }, {\n      title: \"N Factura\",\n      field: \"numeroFactura\",\n      width: \"15%\"\n    }, {\n      title: \"Nombre Cliente\",\n      field: \"nombreCliente\",\n      width: \"15%\"\n    }, {\n      title: \"Tipo Factura\",\n      field: \"nombreTipoFactura\",\n      width: \"15%\"\n    }, {\n      title: \"Codigo\",\n      field: \"codigo\",\n      width: \"15%\"\n    }, {\n      title: \"Rut\",\n      field: \"rut\",\n      width: \"15%\"\n    }, {\n      title: \"Total Neto\",\n      field: \"totalNeto\",\n      width: \"15%\"\n    }, {\n      title: \"IVA\",\n      field: \"IVA\",\n      width: \"15%\"\n    }, {\n      title: \"Total\",\n      field: \"total\",\n      width: \"15%\"\n    }]; //Opciones de data table\n\n    const options = {\n      layout: \"id\",\n      width: \"100%\",\n      pagination: \"local\",\n      paginationSize: 10,\n      movableColumns: true,\n      persistence: {\n        sort: true,\n        filter: true,\n        columns: true\n      },\n      persistenceID: \"dataSave\"\n    };\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 21\n      }\n    }, \"Fecha de Inico\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: e => this.change(e),\n      className: \"form-control\",\n      type: \"date\",\n      name: \"inicio\",\n      value: this.state.ciudad,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }\n    }, \"Fecha de vencimiento\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: e => this.change(e),\n      className: \"form-control\",\n      type: \"date\",\n      name: \"final\",\n      value: this.state.ciudad,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.consultaVentas,\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }, \" Guardar \"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(React15Tabulator, {\n      columns: columns,\n      data: filteredData,\n      options: options,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: this.exExcelTes,\n      className: \"btn btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }, \" Excel \")));\n  }\n\n}\n\nexport default ListaPagos;","map":{"version":3,"sources":["C:/Users/erika/Desktop/proyectos/Casa/distribuidora/front/src/Components/Home/Exportacion/exportacion.js"],"names":["React","api","React15Tabulator","axios","moment","ExcelDownload","data","ListaPagos","Component","constructor","props","consultaVentas","bind","exExcelTes","state","dataExcel","inicio","final","titulos","isExcel","change","e","setState","target","name","value","componentDidMount","post","then","res","status","dataVentas","ventas","newArrayDatosGrilla","newArrayDatosExcel2","arrayTitulos","i","length","newFecha","Date","format","newArrayDatosExcel","push","fechaDocumento","numeroFactura","nombreCliente","nombreTipoFactura","codigo","rut","totalNeto","IVA","total","ex","render","filteredData","columns","title","field","width","options","layout","pagination","paginationSize","movableColumns","persistence","sort","filter","persistenceID","ciudad"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport api from '../../config/Api';\r\nimport \"react-tabulator/lib/css/bootstrap/tabulator_bootstrap.min.css\";\r\nimport { React15Tabulator } from \"react-tabulator\";\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\n\r\nimport ExcelDownload from './exportExcel';\r\n\r\nconst data = [];\r\nclass ListaPagos extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.consultaVentas = this.consultaVentas.bind(this);\r\n    this.exExcelTes = this.exExcelTes.bind(this);\r\n    this.state = { \r\n        data: '',\r\n        dataExcel: '',\r\n        inicio : null,\r\n        final : null,\r\n        titulos : '',\r\n        isExcel : null\r\n    }\r\n  }\r\n\r\n  change(e) {\r\n    this.setState({\r\n      [e.target.name]: e.target.value\r\n    });\r\n  }\r\n\r\n  //Cargamos los datos de la tabla.\r\n  componentDidMount(){\r\n  }\r\n\r\n  //Insertamos los datos.\r\n  consultaVentas(){\r\n    let inicio = this.state.inicio;\r\n    let final = this.state.final;\r\n\r\n    const data = 1\r\n    this.setState({ data });\r\n\r\n    //Realizamos la consulta con las fehcas\r\n    axios.post(`${api}/api/informes/ventas/${inicio}/${final}`)\r\n    .then(res => {\r\n        if(res.status === 200){\r\n            let dataVentas = res.data.ventas;\r\n            let newArrayDatosGrilla = [];\r\n            let newArrayDatosExcel2 = [];\r\n            let arrayTitulos = ['Fecha Documento','N Factura','Nombre Cliente','Tipo Factura','Codigo','Rut','Total Neto','IVA','Total'];\r\n\r\n            for (let i = 0; i < dataVentas.length; i++) {\r\n              let newFecha = new Date(dataVentas[i]['fechaDocumento']);\r\n              newFecha = moment(newFecha).format('DD/MM/YYYY');\r\n\r\n              let newArrayDatosExcel = [];\r\n              newArrayDatosGrilla.push({\r\n                \r\n                fechaDocumento : newFecha,\r\n                numeroFactura : dataVentas[i]['numeroFactura'],\r\n                nombreCliente : dataVentas[i]['nombreCliente'],\r\n                nombreTipoFactura : dataVentas[i]['nombreTipoFactura'],\r\n                codigo : dataVentas[i]['codigo'],\r\n                rut : dataVentas[i]['rut'],\r\n                totalNeto : dataVentas[i]['totalNeto'],\r\n                IVA : dataVentas[i]['IVA'],\r\n                total : dataVentas[i]['total']\r\n              });\r\n              newArrayDatosExcel.push(newFecha);\r\n              newArrayDatosExcel.push(dataVentas[i]['numeroFactura']);\r\n              newArrayDatosExcel.push(dataVentas[i]['nombreCliente']);\r\n              newArrayDatosExcel.push(dataVentas[i]['nombreTipoFactura']);\r\n              newArrayDatosExcel.push(dataVentas[i]['codigo']);\r\n              newArrayDatosExcel.push(dataVentas[i]['rut']);\r\n              newArrayDatosExcel.push(dataVentas[i]['totalNeto']);\r\n              newArrayDatosExcel.push(dataVentas[i]['IVA']);\r\n              newArrayDatosExcel.push(dataVentas[i]['total']);\r\n\r\n              newArrayDatosExcel2.push(newArrayDatosExcel);\r\n            }\r\n            //console.log(newArrayDatos);\r\n            this.setState({ titulos : arrayTitulos });\r\n            this.setState({ data : newArrayDatosGrilla });\r\n            this.setState({ dataExcel : newArrayDatosExcel2});\r\n            this.setState({isExcel: true});\r\n        }else{\r\n            \r\n        }\r\n    })\r\n  }\r\n\r\n  exExcelTes(){\r\n    let titulos = this.state.titulos;\r\n    let dataExcel = this.state.dataExcel;\r\n    const ex =  <ExcelDownload titulos={titulos} datos={dataExcel}/>\r\n    return ex;\r\n  }\r\n\r\n  \r\n  render() {\r\n\r\n    let filteredData = this.state.data;\r\n\r\n    //Agregamos las columnas a la tabla.\r\n    \r\n    const columns = [\r\n      { title: \"Fecha Documento\", field: \"fechaDocumento\", width: \"9%\"},\r\n      { title: \"N Factura\", field: \"numeroFactura\", width: \"15%\"},\r\n      { title: \"Nombre Cliente\", field: \"nombreCliente\", width: \"15%\"},\r\n      { title: \"Tipo Factura\", field: \"nombreTipoFactura\", width: \"15%\"},\r\n      { title: \"Codigo\", field: \"codigo\", width: \"15%\"},\r\n      { title: \"Rut\", field: \"rut\", width: \"15%\"},\r\n      { title: \"Total Neto\", field: \"totalNeto\", width: \"15%\"},\r\n      { title: \"IVA\", field: \"IVA\", width: \"15%\"},\r\n      { title: \"Total\", field: \"total\", width: \"15%\"}\r\n    ];\r\n    \r\n    //Opciones de data table\r\n    const options = {\r\n      layout:\"id\",\r\n      width: \"100%\",\r\n      pagination:\"local\",\r\n      paginationSize:10,\r\n      movableColumns:true,\r\n      persistence:{\r\n        sort:true,\r\n        filter:true,\r\n        columns:true,\r\n      },\r\n      persistenceID:\"dataSave\"\r\n    };\r\n    return (\r\n        <div className=\"form-page\">\r\n            <div className = 'form-group'>\r\n                <div className = 'form-group'>\r\n                    <label>Fecha de Inico</label>\r\n                    <input onChange={e => this.change(e)} className= 'form-control' type = 'date' name='inicio' value= {this.state.ciudad}  />\r\n                </div>\r\n                <div className = 'form-group'>\r\n                    <label>Fecha de vencimiento</label>\r\n                    <input onChange={e => this.change(e)} className= 'form-control' type = 'date' name='final' value= {this.state.ciudad}  />\r\n                </div>\r\n                <div>\r\n                <button type = 'button' onClick ={this.consultaVentas} className = 'btn btn-primary'> Guardar </button>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <React15Tabulator columns={columns} data={filteredData} options={options}/>\r\n            </div>\r\n            <div>\r\n              <button type='button' onClick={this.exExcelTes} className='btn btn-primary'> Excel </button>\r\n            </div>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ListaPagos;"]},"metadata":{},"sourceType":"module"}